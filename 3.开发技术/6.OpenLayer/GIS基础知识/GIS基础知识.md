#### 1.基础概念

##### 1.1 坐标系

GIS 中使用两种常用的坐标系类型：

- 全局坐标系或球坐标系，例如经纬度。这些坐标系通常称为*地理坐标系。*
- 基于横轴墨卡托、亚尔勃斯等积或罗宾森等地图投影的投影坐标系，这些地图投影（以及其他多种地图投影模型）提供了各种机制将地球球面的地图投影到二维笛卡尔坐标平面上。投影坐标系有时称为*地图投影*。

###### 1.1.1地理坐标系

1. 地理坐标系使用地球的三维模型（椭球体）来定义表面上的特定位置以创建网格。 当我们使用“经度”和“纬度”来引用位置时，使用的是地理坐标。
   另一方面，基准是基于特定椭球（因此是更具体的地理坐标系）的地理坐标系。基准只是标准参考点，它类似于你给某人指示你的房子时使用的出发点。

2. 在美国，有两种类型的全国性基准：水平和垂直基准，并且它们通常彼此分开。水平基准使人们能够测量地球表面的距离和方向。
3. 大多数水平基准面在赤道处定义零线，我们从中测量北极和南极。格林威治子午线也有一条零线，用于测量东西方。这些线一起为纬度和经度提供参考。

###### 1.1.2 投影坐标系

投影坐标系定义了如何在二维平面上从三维模型中绘制地理位置。


**无法在二维平面（地图）上显示WGS84坐标系，因此大多数软件程序使用等距矩形投影（Plate-Carrée）投影这些坐标**。 如果我们采用googlemap做底图，然后想通过gps将位置在地图上显示，不经过任何转换直接在googlemap上显示是不行的，因为他们的坐标系不统一。所以在显示之前就必须将gps获取点进行坐标转换到WGS_1984_web_mercator，然后在googlemap上显示。




Esri使用EPSG:54001。EPSG：3857（伪墨卡托）投影的Pseudo-Mercator坐标系采用WGS84坐标系并将其投影到正方形上。（此投影也称为球形墨卡托或Web墨卡托。）

但不是全部 - 伪墨卡托的界限限制在北纬和南纬约85.06º。这个投影最初是由Google引入的，几乎100％用于网络地图，但它很奇怪：投影使用WGS84坐标系（使用WGS84椭球），但将坐标投影到球体上。

这种方法产生一个方形的地图（计算机真正想要的），但没有办法以编程方式表示依赖于两个不同椭球的坐标系，这意味着软件程序必须即兴创作。当软件程序即兴创作时，无法知道各个程序之间的坐标是否一致。这使得EPSG：3857非常适合在计算机上进行可视化，但对数据存储或分析不可靠。 （这就是我们在EPSG：4326中存储数据的原因，但在EPSG：3857中显示）

在大多数情况下，Web地图依赖于使用WGS84坐标存储的数据（在某些程序中称为“未投影”数据），然后使用Pseudo-Mercator可视化数据。 但有时绘图员希望在WGS84预测中看到他们的数据可视化（或者可能将其称为EPSG：4326）。 如上所述，WGS84未被投影 - 没有该数据的直观表示。 因此，如果有人说他们希望在WGS84中看到他们的数据，他们真的希望在Plate-Carrée投影中看到他们的数据，这实际上在页面上创建了线性笛卡尔图。特别是，由于地图上图像像素的位置与地球上相应的地理位置之间的关系特别简单，因此platte-carrée已成为全球栅格数据集的标准，例如Celestia和NASA World Wind。



##### 1.2 EPSG

EPSP的英文全称是European Petroleum Survey Group，中文名称为欧洲石油调查组织。这个组织成立于1986年，2005年并入IOGP(InternationalAssociation of Oil & Gas Producers)，中文名称为国际油气生产者协会。EPSG对世界的每一个地方都制定了地图，但是由于座标系不同，所以地图也各不相同。

1. 中国地图

- 对于中国来讲，以地球的几何球心为中心的地图就是EPSG:4479，以地球的椭球焦点为中心就是EPSG:4480，此外还有EPSG:4490，因为选择不同的座标系对于油气勘探的成本至关重要，所以有不同的座标系。
- 


2. 世界地图

   - **EPSG：4326**（又名WGS84，未投影）是一个地理的非项目坐标系。它是lat，longs GPS显示器。它的单位是十进制度，WGS84是GeoJSON的定义坐标系，为十进制度的经度和纬度。 在大多数情况下，当描述lon/lat坐标位置时，它基于EPSG：4326坐标系。 这也是在Mapbox中存储数据的方式。

     **相信大家对它都有所耳闻，他是大名鼎鼎的gps采用的坐标系，也就是通过gps拿到的坐标信息都是按这个坐标系给我们的经度和纬度。当然，如果你是做移动平台上的gps，获得的经纬度也是按这个坐标系。**

     EPSG：4326无法在平面地图上以有意义的方式显示。

   - **EPSG：3857**（又名Pseudo-Mercator，球形墨卡托或Web墨卡托）是投影坐标系。这是Google Maps和几乎所有其他Web制图应用程序使用的坐标系。

     <u>伪墨卡托投影，也被称为球体墨卡托，Web Mercator。它是基于墨卡托投影的，把 WGS84坐标系投影到正方形。我们前面已经知道 WGS84 是基于椭球体的，但是伪墨卡托投影把坐标投影到球体上，这导致两极的失真变大，但是却更容易计算。这也许是为什么被称为”伪“墨卡托吧。另外，伪墨卡托投影还切掉了南北85.051129°纬度以上的地区，以保证整个投影是正方形的。因为墨卡托投影等正形性的特点，在不同层级的图层上物体的形状保持不变，一个正方形可以不断被划分为更多更小的正方形以显示更清晰的细节。很明显，伪墨卡托坐标系是非常显示数据，但是不适合存储数据的，通常我们使用WGS84 存储数据，使用伪墨卡托显示数据。</u>

      通常，数据存储在EPSG：4326中并显示在 *EPSG：3857中。此外，映射API可以将lat，long（即EPSG：4326）作为输入，但是当这些坐标显示在地图上时，它们将显示为地图基于Web墨卡托（即EPSG：3857）投影。*

3. 常用的地理坐标

   WKID	Geographic Coordinate System 地理坐标
   4214	GCS_Beijing_1954
   4326	GCS_WGS_1984
   4490	GCS_China_Geodetic_Coordinate_System_2000
   4555	GCS_New_Beijing
   4610	GCS_Xian_1980

#### 1.3 中国地理坐标系

##### （1）北京54坐标系

  中国成立以后，我国大地测量进入了全面发展时期，在全国范围内开展了正规的，全面的大地测量和测图工作，迫切需要建立一个参心大地坐标系。由于当时的"一边倒"政治趋向，故我国采用了前苏联的克拉索夫斯基椭球参数，并与前苏联1942年坐标系进行联测，通过计算建立了我国大地坐标系，定名为1954年北京坐标系。因此，1954年北京坐标系可以认为是前苏联1942年坐标系的延伸。**原点不在北京而是在前苏联的普尔科沃。**

##### （2）西安80坐标系

   自北京54坐标系统建立以来，在该坐标系内进行了许多地区的局部平差，其成果得到了广泛的应用。但是随着测绘新理论·新技术的不断发展，人们发现该坐标系存在很多缺点，为此，我国在1978年在西安召开了"全国天文大地网整体平差会议"，提出了建立属于我国自己的大地坐标系，即后来1980西安坐标系。1980年国家大地坐标系采用地球椭球基本参数为1975年国际大地测量与地球物理联合会第十六届大会推荐的数据，即IAG 75地球椭球体。该坐标系的大地原点设在我国中部的陕西省泾阳县永乐镇，位于西安市西北方向约60公里。

##### （3）CGCS2000坐标系

  以地球质量中心为原点的地心大地坐标系，是21世纪空间时代全球通用的基本大地坐标系。以空间技术为基础的地心大地坐标系，是中国新一代大地坐标系的适宜选择。地心大地坐标系可以满足大地测量、地球物理、天文、导航和航天应用以及经济、社会发展的广泛需求。  2000中国大地坐标系(China Geodetic Coordinate System 2000，CGCS2000)，又称之为2000国家大地坐标系，是中国新一代大地坐标系，21世纪初已在中国正式实施。

1.4坐标系转换实例

参考：

由于提供的管网位置数据是坐标系是：“CGCS2000_3_Degree_GK_CM_117E ”下excel表格数据，处理转换成 .shp格式数据如下：。。。。。。

据前端功能实现的需要（底图坐标系是 GCS_China_Geodetic_Coordinate_System_2000），要转换数据，使shp数据文件和底图坐标系保持一致，方便前端的开发。

https://blog.csdn.net/dzdffg/article/details/80599559?depth_1-utm_source=distribute.pc_relevant.none-task&utm_source=distribute.pc_relevant.none-task

#### 2 Openlayer坐标系

openlayer坐标系有几点注意：

1. openlayer默认是3857投影坐标系，坐标是一长串的那种
2. 因此定位经纬度的时候，需要将经纬度转为投影坐标，一长串的那种\
3. 离线地图若是高德地图，那么加载的点需要是高德坐标系对应的点。
4. 地图如果是openstreetmap，那么加载的点需要是WGS84坐标系

##### 2.1 OpenLayers对坐标系转换的支持

 OpenLayers默认只支持EPSG:4326和EPSG:3857，想让它支持CGCS2000坐标系该怎么办？需要自定义坐标系，借助proj4.js

1. 需要内蒙提供影像坐标系、shapefile坐标系，目前应该是提供经纬度；

   是否需要分两步操作：

   1）西安80---->2000坐标

    2） ol 支持2000坐标系。请华信确认。

2.  OpenLayers默认只支持EPSG:4326和EPSG:3857，想让它支持CGCS2000坐标系该怎么办？需要自定义坐标系，借助proj4.js
3. 当地中央经线经度的计算 ：
   方法一： 六度带中央经线经度的计算： 当地中央经线经度＝６°×当地带号－３° 例如：地形图上的横坐标为２０３４５，其所处的六度带的中央 经线经度为：６°×２０－３°＝１１７°（适用于１∶２．５万和 １∶５万地形图） 。 三度带中央经线经度的计算：中央经线经度＝３°×当地带号 （适用于１∶１万地形图） 。
   方法二： 将当地经度的整数部分除以 6，再取商的整数部分加上 l，再将 所得结果乘以 6 后减 3，就可以得到当地的中央经线值。

4. 2000投影坐标系
   1. ![在这里插入图片描述](GIS基础知识.assets/2019071114580265.png)

#### 



